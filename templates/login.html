{% extends 'base.html' %}

{% block content %}
  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="card border rounded-4 shadow">
          <div class="card-body">
            <h2 class="card-title text-center mb-4">Iniciar Sesión</h2>
            <form method="post" class="login-form" id="loginForm">
              {% csrf_token %}
              {{ form.as_p }}
              <div class="text-center mt-3">
                <button type="button" class="btn btn-primary" onclick="validateLogin()">Iniciar Sesión</button>
              </div>
            </form>
            {% if messages %}
              <ul class="messages list-unstyled mt-3">
                {% for message in messages %}
                  <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                {% endfor %}
              </ul>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="errorModal" tabindex="-1" role="dialog" aria-labelledby="errorModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="errorModalLabel">Error en el inicio de sesión</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Cerrar">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>Verifica tu número de identidad o contraseña e inténtalo de nuevo.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    function validateLogin() {
      // Puedes agregar tu propia lógica de validación aquí
      // Por ejemplo, puedes usar JavaScript para verificar los campos antes de enviar el formulario.
  
      // En este ejemplo, simplemente mostraremos el modal de error.
      $('#errorModal').modal('show');
    }
  
    // Cerrar el modal al hacer clic en el botón "Cerrar" o en la X.
    $(document).on('click', '[data-dismiss="modal"]', function () {
      $('#errorModal').modal('hide');
    });
  
    // Limpiar el formulario al cerrar el modal
    $('#errorModal').on('hidden.bs.modal', function () {
      $('#loginForm')[0].reset();
    });
  </script>
  
  
{% endblock %}
